# Mock API Server - Environment Configuration Template
# Copy this file to .env and configure for your environment
# For development: cp .env.local .env
# For production: cp .env.production .env

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3000
HOST=localhost

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================
# Enable/disable authentication
AUTH_ENABLED=false

# Authentication type: jwt | basic | dev-token | bypass | disabled
AUTH_TYPE=dev-token

# JWT Configuration (when AUTH_TYPE=jwt)
JWT_SECRET=your-secret-key-here-min-32-characters
JWT_EXPIRY=1h
JWT_ALGORITHM=HS256

# HTTP Basic Auth (when AUTH_TYPE=basic)
BASIC_USERNAME=admin
BASIC_PASSWORD=your-password-here

# Dev Token (when AUTH_TYPE=dev-token)
DEV_TOKEN=dev-12345

# Bypass Mode (when AUTH_TYPE=bypass)
BYPASS_HEADER=X-Dev-Bypass
BYPASS_VALUE=allow

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Allowed origins (comma-separated or * for all)
CORS_ORIGINS=*

# Allow credentials (cookies, authorization headers)
CORS_CREDENTIALS=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=1000
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_BLOCK_DURATION=3600000

# =============================================================================
# SUSPICIOUS ACTIVITY DETECTION
# =============================================================================
SUSPICIOUS_ACTIVITY_ENABLED=false
SUSPICIOUS_ACTIVITY_THRESHOLD=10
SUSPICIOUS_ACTIVITY_BLOCK_DURATION=7200000

# =============================================================================
# MOCK DATA CONFIGURATION
# =============================================================================
MOCK_DATA_PATH=./data/mock
ENABLE_CRUD=true
DEFAULT_DELAY=0

# =============================================================================
# PROXY CONFIGURATION
# =============================================================================
PROXY_ENABLED=true
PROXY_TIMEOUT=5000
PROXY_RETRIES=2

# Named proxy routes (format: name:url,name2:url2)
PROXY_ROUTES=jsonplaceholder:https://jsonplaceholder.typicode.com,github:https://api.github.com

# Allowed domains for proxy (comma-separated)
PROXY_ALLOWED_DOMAINS=jsonplaceholder.typicode.com,api.github.com,httpbin.org

# Blocked domains (comma-separated)
PROXY_BLOCKED_DOMAINS=

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Log level: silent | error | warn | info | debug
LOG_LEVEL=debug

# Log format: simple | json
LOG_FORMAT=simple

# Log file path (optional)
LOG_FILE=./logs/app.log

# Log rotation (optional)
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=10

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
# Enable WebSocket server
WEBSOCKET_ENABLED=false

# WebSocket server path
WEBSOCKET_PATH=/ws

# Mock events configuration (JSON array)
# Example: [{"name":"ticker","interval":1000,"data":{"price":100}},{"name":"news","interval":5000,"data":{"title":"Breaking News"}}]
WEBSOCKET_MOCK_EVENTS=[]

# Enable WebSocket proxy
WEBSOCKET_PROXY_ENABLED=false

# WebSocket proxy routes (format: name:ws://url,name2:wss://url2)
WEBSOCKET_PROXY_ROUTES=

# Heartbeat interval in milliseconds (optional)
WEBSOCKET_HEARTBEAT_INTERVAL=30000

# Max payload size in bytes (optional)
WEBSOCKET_MAX_PAYLOAD=10485760

# =============================================================================
# DATABASE PERSISTENCE
# =============================================================================
# Enable database persistence for mock data
DATABASE_ENABLED=false

# Database type: sqlite | postgresql | mongodb
DATABASE_TYPE=sqlite

# SQLite Configuration (when DATABASE_TYPE=sqlite)
DATABASE_SQLITE_FILENAME=./data/mock-data.db
DATABASE_SQLITE_MEMORY=false

# PostgreSQL Configuration (when DATABASE_TYPE=postgresql)
DATABASE_PG_HOST=localhost
DATABASE_PG_PORT=5432
DATABASE_PG_DATABASE=mockapi
DATABASE_PG_USERNAME=postgres
DATABASE_PG_PASSWORD=your-password
DATABASE_PG_SSL=false
DATABASE_PG_POOL_SIZE=10

# MongoDB Configuration (when DATABASE_TYPE=mongodb)
DATABASE_MONGO_URI=mongodb://localhost:27017
DATABASE_MONGO_DATABASE=mockapi
DATABASE_MONGO_MAX_POOL=10
DATABASE_MONGO_MIN_POOL=2
DATABASE_MONGO_TIMEOUT=5000

# Database options
DATABASE_AUTO_MIGRATE=true
DATABASE_SYNC_ON_STARTUP=true

# =============================================================================
# ADMIN ENDPOINTS
# =============================================================================
ADMIN_ENABLED=true
ADMIN_AUTH_REQUIRED=false

# =============================================================================
# REQUEST RECORDING AND REPLAY
# =============================================================================
# Enable request recording feature
RECORDING_ENABLED=false

# Auto-record all requests (if false, use /admin/recording/start to begin)
RECORDING_AUTO_RECORD=false

# Maximum number of recordings to keep in memory
RECORDING_MAX_RECORDINGS=1000

# Storage type: memory | file
RECORDING_STORAGE_TYPE=memory

# Storage path for file-based storage
RECORDING_STORAGE_PATH=./data/recordings

# Paths to exclude from recording (comma-separated)
RECORDING_EXCLUDE_PATHS=/admin,/dashboard,/health

# Headers to include in recordings (comma-separated, empty = all)
RECORDING_INCLUDE_HEADERS=content-type,authorization,user-agent

# Headers to exclude from recordings (comma-separated)
RECORDING_EXCLUDE_HEADERS=cookie,set-cookie

# =============================================================================
# DEVELOPMENT FEATURES
# =============================================================================
HOT_RELOAD=true
PRETTY_ERRORS=true
STACK_TRACES=true

# =============================================================================
# SECURITY HEADERS (Production)
# =============================================================================
HELMET_ENABLED=false
HSTS_ENABLED=false
HSTS_MAX_AGE=31536000

# =============================================================================
# REQUEST VALIDATION (Production)
# =============================================================================
MAX_REQUEST_SIZE=1048576
VALIDATE_CONTENT_TYPE=false
REJECT_INVALID_JSON=false
